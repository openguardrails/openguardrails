# OpenGuardrails Environment Configuration
# Copy this file to .env and update the values

# ============================================
# Model API Configuration
# ============================================
# Configure these to point to your deployed vLLM model services
# Replace YOUR_GPU_SERVER_IP with the actual IP address of your GPU server

# Text Model (OpenGuardrails-Text-2510)
GUARDRAILS_MODEL_API_URL=http://YOUR_GPU_SERVER_IP:58002/v1
GUARDRAILS_MODEL_API_KEY=EMPTY
GUARDRAILS_MODEL_NAME=OpenGuardrails-Text

# Embedding Model (bge-m3)
EMBEDDING_API_BASE_URL=http://YOUR_GPU_SERVER_IP:58004/v1
EMBEDDING_API_KEY=EMPTY
EMBEDDING_MODEL_NAME=bge-m3
EMBEDDING_MODEL_DIMENSION=1024
EMBEDDING_SIMILARITY_THRESHOLD=0.7
EMBEDDING_MAX_RESULTS=5

# Vision-Language Model (Optional)
# Uncomment and configure if you have a vision-language model deployed
# GUARDRAILS_VL_MODEL_API_URL=http://YOUR_GPU_SERVER_IP:58003/v1
# GUARDRAILS_VL_MODEL_API_KEY=EMPTY
# GUARDRAILS_VL_MODEL_NAME=OpenGuardrails-VL

# ============================================
# Alternative: Use OpenAI or Other APIs
# ============================================
# You can use any OpenAI-compatible API instead of vLLM
# Examples:

# OpenAI:
# GUARDRAILS_MODEL_API_URL=https://api.openai.com/v1
# GUARDRAILS_MODEL_API_KEY=sk-your-openai-key
# GUARDRAILS_MODEL_NAME=gpt-4

# Local Ollama:
# GUARDRAILS_MODEL_API_URL=http://localhost:11434/v1
# GUARDRAILS_MODEL_API_KEY=ollama
# GUARDRAILS_MODEL_NAME=llama2

# ============================================
# Security Configuration
# ============================================
# ⚠️ CHANGE THESE IN PRODUCTION!

# Super Admin credentials
SUPER_ADMIN_USERNAME=admin@yourdomain.com
SUPER_ADMIN_PASSWORD=CHANGE-THIS-PASSWORD-IN-PRODUCTION

# JWT secret for token signing (generate with: openssl rand -hex 32)
JWT_SECRET_KEY=your-secret-key-change-in-production

# Database password
POSTGRES_PASSWORD=your_password

# ============================================
# Database Configuration
# ============================================
DATABASE_HOST=postgres
DATABASE_USER=openguardrails
DATABASE_NAME=openguardrails
POSTGRES_PORT=54321

# ============================================
# Application Configuration
# ============================================
DEBUG=false
DEPLOYMENT_MODE=local
LOG_LEVEL=INFO

# Default language configuration
# This determines which built-in scanner packages to load at startup
# Available options: 'en' (English), 'zh' (Chinese)
# The system will load scanners from backend/builtin_scanners/{DEFAULT_LANGUAGE}/
# Users can still manually switch UI languages - this is the initial default
DEFAULT_LANGUAGE=en

# ============================================
# Service Ports
# ============================================
FRONTEND_PORT=3000
ADMIN_PORT=5000
DETECTION_PORT=5001
PROXY_PORT=5002

# ============================================
# Service Workers Configuration
# ============================================
# Adjust these based on your server resources
ADMIN_UVICORN_WORKERS=2
ADMIN_MAX_CONCURRENT_REQUESTS=50

DETECTION_UVICORN_WORKERS=32
DETECTION_MAX_CONCURRENT_REQUESTS=400

PROXY_UVICORN_WORKERS=24
PROXY_MAX_CONCURRENT_REQUESTS=300

# ============================================
# Default Tenant Limits
# ============================================
# Default monthly scan limit for new tenants (detections per month)
DEFAULT_MONTHLY_SCAN_LIMIT=10000

# Default rate limit for new tenants (requests per second)
DEFAULT_RATE_LIMIT_RPS=10

# ============================================
# CORS Configuration
# ============================================
CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

# For production, add your domain:
# CORS_ORIGINS=https://yourdomain.com,https://app.yourdomain.com

# ============================================
# SMTP Email Configuration (Optional)
# ============================================
# Configure these if you want email notifications
SMTP_SERVER=smtp.yourdomain.com
SMTP_PORT=465
SMTP_USERNAME=your-email@yourdomain.com
SMTP_PASSWORD=your-password
SMTP_USE_TLS=false
SMTP_USE_SSL=true

# ============================================
# Docker Image Configuration
# ============================================
# Use pre-built image from Docker Hub (recommended for production)
PLATFORM_IMAGE=openguardrails/openguardrails-platform:latest

# Or comment out above and docker compose will build from source
# (for development and customization)
